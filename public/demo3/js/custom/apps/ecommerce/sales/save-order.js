(()=>{"use strict";var e,t,r={init:function(){var r,o,i,n;!function(){$("#kt_ecommerce_edit_order_date").flatpickr({altInput:!0,altFormat:"d F, Y",dateFormat:"Y-m-d"});var r=function(e){if(!e.id)return e.text;var t=document.createElement("span"),r="";return r+='<img src="'+e.element.getAttribute("data-kt-select2-country")+'" class="rounded-circle h-20px me-2" alt="image"/>',r+=e.text,t.innerHTML=r,$(t)};$("#kt_ecommerce_edit_order_billing_country").select2({placeholder:"Select a country",minimumResultsForSearch:1/0,templateSelection:r,templateResult:r}),$("#kt_ecommerce_edit_order_shipping_country").select2({placeholder:"Select a country",minimumResultsForSearch:1/0,templateSelection:r,templateResult:r}),e=document.querySelector("#kt_ecommerce_edit_order_product_table"),t=$(e).DataTable({order:[],scrollY:"400px",scrollCollapse:!0,paging:!1,info:!1,columnDefs:[{orderable:!1,targets:0}]})}(),document.querySelector('[data-kt-ecommerce-edit-order-filter="search"]').addEventListener("keyup",(function(e){t.search(e.target.value).draw()})),r=document.getElementById("kt_ecommerce_edit_order_shipping_form"),document.getElementById("same_as_billing").addEventListener("change",(function(e){e.target.checked?r.classList.add("d-none"):r.classList.remove("d-none")})),function(){var t=e.querySelectorAll('[type="checkbox"]'),r=document.getElementById("kt_ecommerce_edit_order_selected_products"),o=document.getElementById("kt_ecommerce_edit_order_total_price");t.forEach((function(e){e.addEventListener("change",(function(t){var o,n,a,d,c=e.closest("tr").querySelector('[data-kt-ecommerce-edit-order-filter="product"]').cloneNode(!0),l=document.createElement("div"),s=c.innerHTML,m=["d-flex","align-items-center"];(o=c.classList).remove.apply(o,m),(n=c.classList).add.apply(n,["col","my-2"]),c.innerHTML="",(a=l.classList).add.apply(a,m),(d=l.classList).add.apply(d,["border","border-dashed","rounded","p-3","bg-body"]),l.innerHTML=s,c.appendChild(l);var u=c.getAttribute("data-kt-ecommerce-edit-order-id");if(t.target.checked)r.appendChild(c);else{var p=r.querySelector('[data-kt-ecommerce-edit-order-id="'+u+'"]');p&&r.removeChild(p)}i()}))}));var i=function(){var e=r.querySelector("span"),t=r.querySelectorAll('[data-kt-ecommerce-edit-order-filter="product"]');t.length<1?(e.classList.remove("d-none"),o.innerText="0.00"):(e.classList.add("d-none"),n(t))},n=function(e){var t=0;e.forEach((function(e){var r=parseFloat(e.querySelector('[data-kt-ecommerce-edit-order-filter="price"]').innerText);t=parseFloat(t+r)})),o.innerText=t.toFixed(2)}}(),i=document.getElementById("kt_ecommerce_edit_order_form"),n=document.getElementById("kt_ecommerce_edit_order_submit"),o=FormValidation.formValidation(i,{fields:{payment_method:{validators:{notEmpty:{message:"Payment method is required"}}},shipping_method:{validators:{notEmpty:{message:"Shipping method is required"}}},order_date:{validators:{notEmpty:{message:"Order date is required"}}},billing_order_address_1:{validators:{notEmpty:{message:"Address line 1 is required"}}},billing_order_postcode:{validators:{notEmpty:{message:"Postcode is required"}}},billing_order_state:{validators:{notEmpty:{message:"State is required"}}},billing_order_country:{validators:{notEmpty:{message:"Country is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),n.addEventListener("click",(function(e){e.preventDefault(),o&&o.validate().then((function(e){console.log("validated!"),"Valid"==e?(n.setAttribute("data-kt-indicator","on"),n.disabled=!0,setTimeout((function(){n.removeAttribute("data-kt-indicator"),Swal.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){e.isConfirmed&&(n.disabled=!1,window.location=i.getAttribute("data-kt-redirect"))}))}),2e3)):Swal.fire({html:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}))}))}};KTUtil.onDOMContentLoaded((function(){r.init()}))})();